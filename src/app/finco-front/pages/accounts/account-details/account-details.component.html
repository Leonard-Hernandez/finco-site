@if (loading()) {
  <app-loading-page />
} @else {
<div
  class="flex flex-col gap-2 justify-center items-center bg-gradient-to-br from-finco-bg-color to-finco-card-bg-color min-h-screen max-h-screen min-w-screen max-w-screen pt-17 pb-13"
>
  <div class="flex flex-col gap-2 min-w-85 font-bold">
    <app-transaction-chart
      [transactionChartOptions]="transactionChartOptions()"
    />
    <transaction-ranges-buttons [lastTransaction]="lastTransaction()" (range)="updateTransactionFilter($event)" />
  </div>

  <section class="account-details">
    <div
      class="min-w-90 rounded-xl bg-finco-card-bg-color border border-gray-200 p-3"
    >
      <!-- Account Header -->
      <div class="flex justify-between items-center mb-2">
        <div>
          <h3 class="text-sm font-semibold text-finco-primary-color">
            {{ account().name }}
          </h3>
          <p class="text-xs text-finco-secondary-color">{{ account().type }}</p>
        </div>
        <span
          class="text-xs px-2 py-1 rounded-full bg-finco-button-bg-color/10 text-finco-primary-color"
        >
          {{ account().currency }}
        </span>
      </div>

      <!-- Balance -->
      <div class="mb-3">
        <p class="text-xs text-finco-secondary-color">Balance</p>
        <p
          class="text-xl font-bold"
          [class.text-red-500]="account().balance! < 0"
          [class.text-finco-primary-color]="account().balance! >= 0"
        >
          {{ account().balance | currency : "" : "" }}
        </p>
      </div>

      <!-- Action Buttons -->
      <div class="grid grid-cols-3 gap-2 mt-1">
        <!-- Withdraw Button -->
        <button
          (click)="
            router.navigate([
              '/accounts/operation/' + account().id + '/withdraw'
            ])
          "
          class="flex flex-col items-center justify-center p-1.5 rounded-lg"
        >
          <div
            class="w-10 h-10 rounded-full bg-red-500/20 flex items-center justify-center"
          >
            <svg class="w-5 h-5 text-red-500">
              <use xlink:href="/sprite.svg#minusIcon" />
            </svg>
          </div>
        </button>
        <!-- Transfer Button -->
        <button
          (click)="
            router.navigate([
              '/accounts/operation/' + account().id + '/transfer'
            ])
          "
          class="flex flex-col items-center justify-center p-1.5 rounded-lg hover:bg-finco-button-bg-color/10 transition-colors"
        >
          <div
            class="w-10 h-10 rounded-full bg-finco-button-bg-color/10 flex items-center justify-center"
          >
            <svg class="w-5 h-5 text-finco-primary-color">
              <use xlink:href="/sprite.svg#transferIcon" />
            </svg>
          </div>
        </button>
        <!-- Deposit Button -->
        <button
          (click)="
            router.navigate([
              '/accounts/operation/' + account().id + '/deposit'
            ])
          "
          class="flex flex-col items-center justify-center p-1.5 rounded-lg hover:bg-finco-button-bg-color/10 transition-colors"
        >
          <div
            class="w-10 h-10 rounded-full bg-finco-button-bg-color/10 flex items-center justify-center"
          >
            <svg class="w-5 h-5 text-finco-primary-color">
              <use xlink:href="/sprite.svg#plusIcon" />
            </svg>
          </div>
        </button>
      </div>
      <!-- Fee Info -->
      <div
        class="flex justify-between items-center my-1 text-finco-secondary-color text-sm"
      >
        <p class="text-xs font-bold">Withdraw Fee</p>
        <p class="text-xs font-bold">{{ account().withdrawFee | percent }}</p>
        <p></p>
        <p class="text-xs font-bold">Deposit Fee</p>
        <p class="text-xs font-bold">{{ account().depositFee | percent }}</p>
      </div>
    </div>
  </section>

  <div
    class="w-95 h-full flex-2 flex flex-col p-3 gap-2 overflow-y-auto rounded-xl z-1"
  >
    <div>
      <h2 class="text-finco-secondary-color">Transactions</h2>
    </div>
    <div class="flex flex-col gap-2 overflow-y-auto">
      @for (transaction of transactions(); track $index) {
      <app-transaction [transaction]="transaction" />
      }
    </div>
  </div>
</div>

<a
  class="fixed top-15 right-4 h-10 w-10 rounded-full shadow-sm shadow-finco-secondary-color text-finco-primary-color font-bold text-4xl flex justify-center items-center"
  routerLink="/accounts/edit/{{ account().id }}"
>
  <div
    class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
  >
    <svg class="h-5 w-5 text-finco-primary-color">
      <use xlink:href="/sprite.svg#editIcon" />
    </svg>
  </div>
</a>

}